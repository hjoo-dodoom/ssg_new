<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <title>법인영업몰_협력회사 입점/제휴</title>

    <!-- styles -->
    <link href="../dist/css/normalize.css" rel="stylesheet" />
    <link href="../dist/css/layout.css" rel="stylesheet" />
    <link href="../dist/css/content.css" rel="stylesheet" />
    <link href="../dist/css/common.css" rel="stylesheet" />
    <link href="../dist/css/jquery.modal.css" rel="stylesheet" />
    <link href="../dist/css/swiper.min.css" rel="stylesheet" />
    <link href="../dist/css/simplebar.css" rel="stylesheet" type="text/css" />

    <!-- scripts -->
    <script src="../dist/js/jquery-2.2.4.min.js"></script>
    <script src="../dist/js/jquery.validate.min.js"></script>
    <script src="../dist/js/jquery.modal.min.js"></script>
    <script src="../dist/js/box_alert.js"></script>
    <script src="../dist/js/swiper.min.js"></script>
    <script src="../dist/js/simplebar.min.js"></script>
    <script src="../dist/js/common.js"></script>
    <script src="../dist/js/lenis.min.js"></script>

    <!-- icons -->
    <link rel="shortcut icon" href="../dist/favicon.ico" type="image/x-icon">
    <link rel="icon" href="../dist/favicon.ico" type="image/x-icon">

    <script>
        // html template include
        // 개발 완료시 삭제해주세요
        function includeTemplateFile(path, targetId) {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', path, true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    var tempDiv = document.createElement('div');
                    tempDiv.innerHTML = xhr.responseText;

                    var templates = tempDiv.getElementsByTagName('template');
                    for (var i = 0; i < templates.length; i++) {
                        var template = templates[i];
                        if (template.getAttribute('data-title') === targetId) {
                            // 임시 div에 template의 innerHTML 삽입
                            var tempContent = document.createElement('div');
                            tempContent.innerHTML = template.innerHTML;

                            var target = document.getElementById(targetId);
                            while (tempContent.firstChild) {
                                target.appendChild(tempContent.firstChild);
                            }
                            break;
                        }
                    }
                }
            };
            xhr.send();
        }

    </script>
</head>

<body>

    <div id="layout">

        <!-- 공통영역1 -->
        <div id="header" class="dark_mode"></div>
        <!-- <div id="header" class=""></div> -->

        <script>
            //html include
            //헤더&푸터 개발 완료시 삭제해주세요
            function includeFile(path, targetId) {
                var xhr = new XMLHttpRequest();
                xhr.open('GET', path, true);
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        document.getElementById(targetId).innerHTML = xhr.responseText;
                    }
                };
                xhr.send();
            }
            var includePath = "../layout/header.html";
            includeFile(includePath, 'header');
        </script>
        <!-- //공통영역1 -->

        <div id="content">
            <div class="sub_visual">
                <div class="bg" style="background-image: url(../dist/images/content/bg_visual02.jpg)"></div>
                <div class="section_inner">
                    <div class="visual_text">
                        <h3>협력회사 입점/제휴</h3>
                        <p>신세계백화점과 함께하는 성공적인<br />비즈니스를 시작하세요.</p>
                    </div>
                </div>
            </div>

            <div class="container">
                <form action="">
                    <div class="">
                        <div class="od_box">
                            <div class="od_title">
                                <h3>기본정보</h3>
                                <div class="od_sub">
                                    <p class="required">모든 항목을 빠짐없이 입력해 주세요.</p>
                                </div>
                                <button type="button" class="btn btn_type6 btn_inline btn_black_line"
                                    onclick="openLayer('#consultConfirm_popup')">등록된 상담신청서 확인</button>
                            </div>
                            <div class="od_table form form_type4 input_md">
                                <table>
                                    <colgroup>
                                        <col style="width:17rem">
                                        <col>
                                        <col style="width:17rem">
                                        <col>
                                    </colgroup>
                                    <tbody>
                                        <tr class="no_border">
                                            <td colspan="4">
                                                <div class="flex-row">
                                                    <div class="flex-item">
                                                        <div class="th">
                                                            <div class="required" style="width:17rem">업체명</div>
                                                        </div>
                                                        <div class="input_group">
                                                            <div class="input">
                                                                <input type="text" name="" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="flex-item">
                                                        <div class="th">
                                                            <div class="required" style="width:17rem">사업자등록번호
                                                            </div>
                                                        </div>
                                                        <div class="input_group">
                                                            <div class="input">
                                                                <input type="tel" name="" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="no_border">
                                            <td colspan="4">
                                                <div class="flex-row">
                                                    <div class="flex-item">
                                                        <div class="th">
                                                            <div class="required" style="width:17rem">담당자(직함)
                                                            </div>
                                                        </div>
                                                        <div class="input_group">
                                                            <div class="input">
                                                                <input type="text" name="" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="flex-item">
                                                        <div class="th">
                                                            <div class="required" style="width:17rem">대표번호</div>
                                                        </div>
                                                        <div class="input_group">
                                                            <div class="input">
                                                                <input type="tel" name="" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="no_border">
                                            <td colspan="4">
                                                <div class="flex-row">
                                                    <div class="flex-item">
                                                        <div class="th">
                                                            <div class="required" style="width:17rem">휴대폰번호(발주)
                                                            </div>
                                                        </div>
                                                        <div class="input_group">
                                                            <div class="input">
                                                                <input type="tel" name="" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="flex-item">
                                                        <div class="th">
                                                            <div class="required" style="width:17rem">휴대폰번호(영업)
                                                            </div>
                                                        </div>
                                                        <div class="input_group">
                                                            <div class="input">
                                                                <input type="tel" name="" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class="required">담당자 이메일</th>
                                            <td colspan="3">
                                                <div class="input_group">
                                                    <div class="input">
                                                        <input type="text" name="">
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class="required">주요브랜드</th>
                                            <td colspan="3">
                                                <div class="input_group">
                                                    <div class="input">
                                                        <input type="text" name="">
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class="required">회사구분</th>
                                            <td colspan="3">
                                                <div class="check_list">
                                                    <div class="item">
                                                        <label class=" checkbox checkbox_type2">
                                                            <input type="checkbox">
                                                            <span class="ck_icon"></span>
                                                            KC인증
                                                        </label>
                                                    </div>
                                                    <div class="item">
                                                        <label class=" checkbox checkbox_type2">
                                                            <input type="checkbox">
                                                            <span class="ck_icon"></span>
                                                            수입원
                                                        </label>
                                                    </div>
                                                    <div class="item">
                                                        <label class=" checkbox checkbox_type2">
                                                            <input type="checkbox">
                                                            <span class="ck_icon"></span>
                                                            총판계약
                                                        </label>
                                                    </div>
                                                    <div class="item">
                                                        <label class=" checkbox checkbox_type2">
                                                            <input type="checkbox">
                                                            <span class="ck_icon"></span>
                                                            특판
                                                        </label>
                                                    </div>
                                                    <div class="item">
                                                        <label class=" checkbox checkbox_type2">
                                                            <input type="checkbox">
                                                            <span class="ck_icon"></span>
                                                            대리점
                                                        </label>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class="required">상담구분</th>
                                            <td colspan="3">
                                                <div class="check_list">
                                                    <div class="item">
                                                        <label class="checkbox radio_type1">
                                                            <input type="radio" name="type" value="입점상담">
                                                            <span class="ck_icon"></span>
                                                            입점상담
                                                        </label>
                                                    </div>
                                                    <div class="item">
                                                        <label class="checkbox radio_type1">
                                                            <input type="radio" name="type" value="기타">
                                                            <span class="ck_icon"></span>
                                                            기타
                                                        </label>
                                                    </div>
                                                    <div class="item">
                                                        <div class="input_group">
                                                            <div class="input">
                                                                <input type="text" name="">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class="required">제안서 양식</th>
                                            <td colspan="3">
                                                <div class="check_list">
                                                    <div class="item">
                                                        <label class="checkbox checkbox_type2 form_checked">
                                                            <input type="checkbox">
                                                            <span class="ck_icon"></span>
                                                            식품제안서(건기식포함)
                                                        </label>
                                                    </div>
                                                    <div class="item">
                                                        <label class="checkbox checkbox_type2 form_checked">
                                                            <input type="checkbox">
                                                            <span class="ck_icon"></span>
                                                            일반상품제안서
                                                        </label>
                                                    </div>
                                                    <div class="item">
                                                        <p class="warning red red_text_color">중요 : 제안서 선택 후 지정된 양식으로만 상담
                                                            가능합니다.(복수선택 가능)</p>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class="required">요청가격대</th>
                                            <td colspan="3">
                                                <div class="input_group">
                                                    <div class="input">
                                                        <input type="text" name="">
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="od_box">
                            <div class="od_title">
                                <h3>상담내용</h3>
                            </div>
                            <div class="od_table form form_type4">
                                <table>
                                    <colgroup>
                                        <col style="width:17rem">
                                        <col>
                                    </colgroup>
                                    <tbody>
                                        <tr>
                                            <th class="align_top required">내용</th>
                                            <td>
                                                <div class="input_group">
                                                    <div class="input">
                                                        <textarea name="" id="" class="max_text size_lg"
                                                            maxlength=""></textarea>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class="align_top required">첨부파일(제안서)</th>
                                            <td>
                                                <div class="file_upload">
                                                    <div class="file_item">
                                                        <div class="title">회사소개서</div>
                                                        <div class="file_content">
                                                            <label>
                                                                <input type="file" onchange="uploadFile(this)" />
                                                                <span
                                                                    class="btn btn_type5 btn_black_line">파일선택</span>
                                                                <span class="file_name">선택한 파일이 없습니다</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="file_item">
                                                        <div class="title">사업자등록증</div>
                                                        <div class="file_content">
                                                            <label>
                                                                <input type="file" onchange="uploadFile(this)" />
                                                                <span
                                                                    class="btn btn_type5 btn_black_line">파일선택</span>
                                                                <span class="file_name">선택한 파일이 없습니다</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="file_item hide">
                                                        <div class="title">상품제안서</div>
                                                        <div class="file_content">
                                                            <label class="form_type">
                                                                <input type="file" onchange="uploadFile(this)" />
                                                                <span
                                                                    class="btn btn_type5 btn_black_line">파일선택</span>
                                                                <span class="file_name">선택한 파일이 없습니다</span>
                                                            </label>
                                                            <a href="/files/sample.pdf" class="btn_download"
                                                                download>상품제안(엑셀) 양식 다운로드</a>

                                                        </div>
                                                    </div>
                                                    <div class="file_item hide">
                                                        <div class="title">식품제안서</div>
                                                        <div class="file_content">
                                                            <label class="form_type">
                                                                <input type="file" onchange="uploadFile(this)" />
                                                                <span
                                                                    class="btn btn_type5 btn_black_line">파일선택</span>
                                                                <span class="file_name">선택한 파일이 없습니다</span>
                                                            </label>
                                                            <a href="/files/sample.pdf" class="btn_download"
                                                                download>식품제안(엑셀) 양식 다운로드</a>

                                                        </div>
                                                    </div>
                                                </div>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="check_list mgt25 pdb56">
                            <div class="item">
                                <label class="checkbox checkbox_type2">
                                    <input type="checkbox" name="check_yn" id="check_yn">
                                    <span class="ck_icon"></span>
                                    <em>사업자정보 수집 및 이용에 동의합니다.</em>
                                    <button type="button" class="btn_inner"
                                        onclick="openLayer('#terms_popup')">내용보기</button>
                                </label>
                            </div>
                        </div>
                        <div class="form_btns between_lg">
                            <button type="submit" class="btn btn_submit">상담하기</button>
                            <button type="submit" class="btn btn_modify">수정하기</button>
                            <button type="submit" class="btn btn_delete">삭제하기</button>
                        </div>
                    </div>
                </form>

            </div>


            <!-- 등록된 상담신청서 확인 -->
            <div id="consultConfirm_popup" class="layer_popup layer_default">
                <div class="layer_content  width_md height_md">
                    <div class="layer_default_title">등록된 상담신청서 확인</div>
                    <button type="button" class="layer_default_close" onclick="closeLayer(this)">팝업닫기</button>
                    <div class="layer_default_content layer_scroll" data-simplebar>
                        <!-- 내용 -->
                        <form action="" id="consultConfirmForm" novalidate="novalidate">
                            <div class="form form_type4">
                                <div class="row">
                                    <div class="row_top">
                                        <div class="title">사업자번호</div>
                                    </div>
                                    <div class="input_group">
                                        <div class="input">
                                            <input type="tel" id="business_number" name="business_number"
                                                placeholder="-없이 사업자번호 입력">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="row_top">
                                        <div class="title">휴대폰 번호</div>
                                        <p class="warning">이전 상담 신청 시 등록했던 휴대폰 번호(영업) 또는 휴대폰 번호(발주)를 입력해 주세요.</p>
                                    </div>
                                    <div class="input_group">
                                        <div class="input">
                                            <input type="tel" name="phone_number" placeholder="-없이 휴대폰번호 입력"
                                                maxlength="11">
                                        </div>
                                        <button class="btn_certify" type="button" id="sendSms">인증번호 받기</button>
                                        <button class="btn_certify" type="button" id="reSendSms"
                                            style="display: none;">인증번호 재발송</button>
                                    </div>
                                </div>

                                <div class="row" id="certify_numberbox" style="display: none;">
                                    <div class="row_top">
                                        <div class="title">인증번호</div>
                                    </div>
                                    <div class="input_group">
                                        <div class="input">
                                            <input type="tel" name="certify_number" maxlength="6">
                                            <span class="count" id="count_down">3:00</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form_btns between_lg">
                                <input type="submit" class="btn_submit" value="휴대폰 인증하기">
                            </div>
                        </form>
                    </div>
                </div>
                <span class="layer_bg" onclick="closeLayer(this)"></span>
            </div>
            <!-- //등록된 상담신청서 확인 -->
            <!-- 약관 -->
            <div id="terms_popup" class="layer_popup layer_default">
                <div class="layer_content  width_lg height_md">
                    <div class="layer_default_title">사업자 개인정보 수집 및 이용동의</div>
                    <button type="button" class="layer_default_close" onclick="closeLayer(this)">팝업닫기</button>
                    <div class="layer_default_content terms_content layer_scroll" data-simplebar>
                        <div id="business_personal_info_provide_terms2">
                            <script>
                                var includePath = "../inc/terms.html";
                                includeTemplateFile(includePath, 'business_personal_info_provide_terms2');
                            </script>
                        </div>
                    </div>
                </div>
                <span class="layer_bg" onclick="closeLayer(this)"></span>
            </div>
            <!-- //약관 -->


            <div id="floatting_fixed">
                <button type="button" id="btn_totop" onclick="toTop();">상단으로</button>
            </div>

            <!-- 공통영역2 -->
            <!-- 푸터 -->
            <div id="footer"></div>
            <script>
                //html include
                //헤더&푸터 개발 완료시 삭제해주세요
                var includePath = "../layout/footer.html";
                includeFile(includePath, 'footer');
            </script>
            <!-- //푸터 -->
            <!-- //공통영역2 -->
        </div>
    </div>


    <script>


        var filter = "win16|win32|win64|macintel|mac";
        if (navigator.platform) {
            if (filter.indexOf(navigator.platform.toLowerCase()) < 0) {
                // mobile
                box_alert('협력회사 입점/제휴 신청 및 확인은 PC에서만 가능합니다.');
            }
        }


        $('.form_checked').on('change', function(){
            var index = $('.form_checked').index(this);

            if(index === 0){ // 식품제안서(건기식포함)
                $('.form_type').eq(1).closest('.file_item').toggleClass('hide');
            }

            if(index === 1){ // 일반상품제안서
                $('.form_type').eq(0).closest('.file_item').toggleClass('hide');
            }
        });




        var error_lists = [];
        var certifyErrorCount = 0; // 인증번호 오류 횟수 추적

        //jquery.validate.js && box_alert 예제코드
        $("#consultConfirmForm").validate({
            rules: {
                business_number: {
                    required: true,
                    digits: true,
                    minlength: 10,
                    maxlength: 10
                },
                phone_number: {
                    required: true,
                    digits: true,
                    minlength: 11
                },
                certify_number: {
                    required: true,
                    digits: true,
                    minlength: 6
                }
            },
            messages: {
                business_number: {
                    required: "사업자등록번호를 입력해 주세요.",
                    digits: "숫자만 입력해 주세요.",
                    minlength: "사업자등록번호는 10자리여야 합니다.",
                    maxlength: "사업자등록번호는 10자리여야 합니다."
                },
                phone_number: {
                    required: "휴대폰번호를 입력해주세요.",
                    digits: "휴대폰번호는 숫자만 입력해주세요.",
                    minlength: "휴대폰번호 11자리를 입력해주세요."
                },
                certify_number: {
                    required: "인증번호를 입력해주세요.",
                    digits: "인증번호는 숫자만 입력해주세요.",
                    minlength: "인증번호 6자리를 입력해주세요."
                }
            },
            errorPlacement: function (error, element) {
                error_lists.push(error.text());

                // 인증번호 오류 횟수 증가
                var inputElement = element.find('input');
                if (inputElement.length && inputElement.attr('name') === 'certify_number') {
                    certifyErrorCount++;
                }
            },
            invalidHandler: function (event, validator) {
                setTimeout(function () {
                    // 인증번호 5회 실패 후 submit 시
                    // 1분간 인증번호 받기 제한
                    if (certifyErrorCount > 5) {
                        box_alert("인증번호를 연속으로 실패하였습니다.<br />1분간 인증보호 받기가 제한됩니다", "error");

                        return false;
                    }

                    //에러 배열 중복제거
                    var set = new Set(error_lists);
                    var uniqueArr = [...set];
                    var error_message = uniqueArr.join('<br />');

                    //얼랏 실행
                    box_alert(error_message, 'info');

                    //에러 배열 초기화
                    error_lists = [];
                    return false;
                }, 0);
            },
            submitHandler: function (form, event) {
                event.preventDefault();
                //submit 로직
                console.log("성공");
            },

            //display:none인것도 유효성 체크 (인증번호)
            ignore: [],
        });

        //인증번호
        var countdownInterval;
        var certifyNumberBox = document.getElementById('certify_numberbox');

        function startCountdown(buttonId, reButtonId, countdownId) {
            var button = document.getElementById(buttonId);
            var reButton = document.getElementById(reButtonId);
            var countdownSpan = document.getElementById(countdownId);
            button.style.display = 'none';
            reButton.style.display = 'block';
            reButton.disabled = true;
            certifyNumberBox.style.display = 'block';
            var secondsLeft = 180; // 3분

            countdownInterval = setInterval(function () {
                secondsLeft--;
                var minutes = Math.floor(secondsLeft / 60);
                var seconds = secondsLeft % 60;
                countdownSpan.textContent = minutes + `:` + seconds.toString().padStart(2, '0');

                if (secondsLeft <= 0) {
                    clearInterval(countdownInterval);
                    countdownSpan.textContent = '03:00';

                    error_lists.push('시간이 만료되었습니다. 다시 시도해주세요.');

                    // 버튼 활성화
                    reButton.disabled = false;

                    //에러 배열 중복제거
                    var set = new Set(error_lists);
                    var uniqueArr = [...set];
                    var error_message = uniqueArr.join('<br />');

                    //얼랏 실행
                    box_alert(error_message, 'info');

                    //에러 배열 초기화
                    error_lists = [];
                }
            }, 1000);
        }

        document.getElementById('sendSms').addEventListener('click', function () {
            // 등록된 핸드폰번호가 없는 경우
            // box_alert('입력하신 사업자번호와 휴대폰번호로 조회되는 상담신청서는 없습니다.', 'info');

            // 등록된 휴대폰번호가 있는 경우
            clearInterval(countdownInterval);
            startCountdown('sendSms', 'reSendSms', 'count_down');
        });

        document.getElementById('reSendSms').addEventListener('click', function () {
            clearInterval(countdownInterval);
            startCountdown('sendSms', 'reSendSms', 'count_down');
        });
    </script>
</body>

</html>